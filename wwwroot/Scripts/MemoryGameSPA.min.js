import { Start as fv } from "./WebSharper.Core.JavaScript/Runtime.js"
import { Lazy as fw, Create as fx, GetOptional as fy, SetOptional as fz, OnLoad as fA } from "./WebSharper.Core.JavaScript/Runtime.js"
function a(fB){ return"Dispose"in fB;}
function b(){ x("");L.RunById("main", c());return(fB) => { d(fB);};}
function c(){ return N.mainView;}
function d(){ function fB(){ const fC=null;return bA(() => bB(bC(1000), () => { f().Set(e(f().Get()));return!f().Get().IsGameOver?bB(fB(), () => bD(null)):bE();}));} bF(fB(), null);}
function e(fB){ if(fB.IsGameOver)return fB;else { const fC=bd((fE, fF) => fE===fB.CurrentPlayer&&fF.TimeLeft>0?br(fF.Name, fF.Score, fF.TimeLeft-1, fF.Lives):fF, fB.Players);const fD=fC.get_Item(fB.CurrentPlayer);return be((fE) => fE.TimeLeft<=0, fC)?S(fB.Cards, fB.Flipped, fC, fB.CurrentPlayer, true, fB.Streak):fD.TimeLeft<=0?S(fB.Cards, fB.Flipped, fC, (fB.CurrentPlayer+1)%fC.Length, fB.IsGameOver, fB.Streak):S(fB.Cards, fB.Flipped, fC, fB.CurrentPlayer, fB.IsGameOver, fB.Streak);} }
function f(){ return N.gameStateVar;}
function g(fB, fC){ return S(m(fB), u0036.Empty, n(fC), 0, false, 0);}
function h(){ return N.playerNamesVar;}
function i(){ return N.nameInputView;}
function j(fB){ return L.Element("div", [], bd((fC, fD) => L.Element("div", [cM.Create("style", fC===fB.CurrentPlayer?"font-weight:bold; color:green;":"color:black;")], [L.TextNode(String(fD.Name)+" - Pont: "+String(fD.Score)+", Id\u0151: "+String(fD.TimeLeft)+"s, Életek: "+String(fD.Lives))]), fB.Players));}
function k(fB){ return L.Element("div", [cM.Create("class", "cards")], bd(o, fB.Cards));}
function l(fB){ d(fB);f().Set(g(8, u0039(["Játékos1", "Játékos2"])));}
function m(fB){ return bd((fC, fD) => bO(fC, fD, false, false), bj(() => q().Next_2(), bi((fC) => u0039([fC, fC]), bl(b0(fB, p())))));}
function n(fB){ return $((fC) => br(fC, 0, 60, 5), fB);}
function o(fB, fC){ return L.Element("div", [cM.Create("class", bs(" ", bl(bY(() => bX(["card"], bY(() => bX(fC.IsFlipped||fC.IsMatched?["flipped"]:[], bY(() => fC.IsMatched?["matched"]:[])))))))), cN("click", () =>(fD) => r(fB, fD))], [L.Element("div", [cM.Create("class", "card-inner")], [L.Element("div", [cM.Create("class", "card-front")], [L.TextNode("\u2753")]), L.Element("div", [cM.Create("class", "card-back")], [L.TextNode(fC.Value)])])]);}
function p(){ return N.emojis;}
function q(){ return N.random;}
function r(fB){ const fC=f().Get();if(!fC.IsGameOver&&fC.Flipped.Length<2){ const fD=s(fC, fB);f().Set(fD);if(fD.Flipped.Length===2){ const fE=null;bF(bA(() => bB(bC(1000), () => { const fF=t(f().Get());const fG=fD.Flipped;const fH=!(fG.$==1&&(fG.$1.$==1&&(fG.$1.$1.$==0&&fD.Cards.get_Item(fG.$0).Value==fD.Cards.get_Item(fG.$1.$0).Value)))?u(fF):fF;f().Set(fH);return bE();})), null);} else void 0;} else void 0;}
function s(fB, fC){ return bn(fC, fB.Flipped)||fB.Cards.get_Item(fC).IsMatched?fB:S(bd((fD, fE) => fD===fC?bO(fE.Id, fE.Value, true, fE.IsMatched):fE, fB.Cards), u0036.Cons(fC, fB.Flipped), fB.Players, fB.CurrentPlayer, fB.IsGameOver, fB.Streak);}
function t(fB){ const fC=fB.Flipped;if(fC.$==1){ if(fC.$1.$==1){ if(fC.$1.$1.$==0){ const fD=fC.$0;const fE=fC.$1.$0;if(fB.Cards.get_Item(fD).Value==fB.Cards.get_Item(fE).Value){ const fF=bd((fL, fM) => fL===fD||fL===fE?bO(fM.Id, fM.Value, fM.IsFlipped, true):fM, fB.Cards);const fG=bd((fL, fM) => fL===fB.CurrentPlayer?br(fM.Name, fM.Score+1, fM.TimeLeft, fM.Lives):fM, fB.Players);const fH=w(fF);const fI=fB.Streak+1;return S(fI>=3?v(fF):fF, u0036.Empty, fG, fB.CurrentPlayer, fH, fI%3);} else { const fJ=bd((fL, fM) => fL===fD||fL===fE?bO(fM.Id, fM.Value, false, fM.IsMatched):fM, fB.Cards);const fK=bd((fL, fM) => fL===fB.CurrentPlayer?br(fM.Name, fM.Score, fM.TimeLeft, fM.Lives-1):fM, fB.Players);return S(fJ, u0036.Empty, fK, fB.CurrentPlayer, fK.get_Item(fB.CurrentPlayer).Lives<=0||w(fJ), 0);} } else return fB;} else return fB;} else return fB;}
function u(fB){ return S(fB.Cards, u0036.Empty, fB.Players, (fB.CurrentPlayer+1)%fB.Players.Length, fB.IsGameOver, fB.Streak);}
function v(fB){ const fC=bj(() => q().Next_2(), bb((fD) =>!fD.IsMatched, fB));return bd((fD, fE) => bO(fD, fE.Value, fE.IsFlipped, fE.IsMatched), bo(bb((fD) => fD.IsMatched, fB), fC));}
function w(fB){ return be((fC) => fC.IsMatched, fB);}
function x(fB){!y()?(z(true),A(globalThis.document.body, "")):void 0;B().set_Item(fB, C(""));}
function y(){ return bQ.LocalTemplatesLoaded;}
function z(fB){ bQ.LocalTemplatesLoaded=fB;}
function A(fB, fC){ const fD=C(fC);const fE=new U("New_5");const fF=fB.querySelectorAll("[ws-template]");for(let fR=0, fS=fF.length-1;fR<=fS;fR++){ const fG=fF[fR];const fH=fG.getAttribute("ws-template").toLowerCase();fG.removeAttribute("ws-template");fE.set_Item(fH, D(fG));} const fI=fB.querySelectorAll("[ws-children-template]");for(let fT=0, fU=fI.length-1;fT<=fU;fT++){ const fJ=fI[fT];const fK=fJ.getAttribute("ws-children-template").toLowerCase();fJ.removeAttribute("ws-children-template");fE.set_Item(fK, E(fJ));} const fL=fB.querySelectorAll("template[id]");for(let fV=0, fW=fL.length-1;fV<=fW;fV++){ const fM=fL[fV];fE.set_Item(fM.getAttribute("id").toLowerCase(), F(fM));} const fN=fB.querySelectorAll("template[name]");for(let fX=0, fY=fN.length-1;fX<=fY;fX++){ const fO=fN[fX];fE.set_Item(fO.getAttribute("name").toLowerCase(), F(fO));} const fP=new bV("New_3");function fQ(fZ){ if(!fD.ContainsKey(fZ)){ let f0;const f1=(f0=null,[fE.TryGetValue(fZ, {get:() => f0, set:(f2) => { f0=f2;}}), f0]);if(f1[0]){ fP.SAdd(fZ);fE.RemoveKey(fZ);G(fC, u0038(fZ), f1[1], u0038(fQ));} else console.warn(fP.Contains(fZ)?"Encountered loop when instantiating "+fZ:"Local template does not exist: "+fZ);} } while(fE.count>0)fQ(bW(fE.Keys));}
function B(){ return bQ.LoadedTemplates;}
function C(fB){ let fC;const fD=(fC=null,[B().TryGetValue(fB, {get:() => fC, set:(fF) => { fC=fF;}}), fC]);if(fD[0])return fD[1];else { const fE=new U("New_5");B().set_Item(fB, fE);return fE;} }
function D(fB){ fB.removeAttribute("ws-template");const fC=fB.getAttribute("ws-replace");if(fC==null){ } else { fB.removeAttribute("ws-replace");const fD=fB.parentNode;if(V(fD, null)){ } else { const fE=globalThis.document.createElement(fB.tagName);fE.setAttribute("ws-replace", fC);fD.replaceChild(fE, fB);} } const fF=globalThis.document.createElement("div");fF.appendChild(fB);return fF;}
function E(fB){ const fC=globalThis.document.createElement("div");while(fB.hasChildNodes())fC.appendChild(fB.firstChild);return fC;}
function F(fB){ const fC=globalThis.document.createElement("div");const fD=fB.content;for(let fE=0, fF=fD.childNodes.length-1;fE<=fF;fE++)fC.appendChild(fD.childNodes[fE].cloneNode(true));return fC;}
function G(fB, fC, fD, fE){ const fF=new bV("New_3");function fG(fN, fO){ while(true)switch(fN){ case 0:if(fO!==null){ const fP=fO.nextSibling;if(V(fO.nodeType, Node.TEXT_NODE))dk(fO);else if(V(fO.nodeType, Node.ELEMENT_NODE))fI(fO);fO=fP;} else return null;break;case 1:const fQ=ds(fO.nodeName, u0038(3), null).toLowerCase();const fR=fQ.indexOf(".");const fS=fR===-1?[fB, fQ]:[ds(fQ, null, u0038(fR-1)), ds(fQ, u0038(fR+1), null)];const fT=fS[1];const fU=fS[0];if(fU!=""&&!B().ContainsKey(fU))return dl(fT);else { if(fU==""&&fE!=null)fE.$0(fT);const fV=B().Item(fU);if(!fV.ContainsKey(fT))return dl(fT);else { const fW=fV.Item(fT);const fX=fW.cloneNode(true);const fY=new bV("New_3");const fZ=new U("New_5");const f0=fO.attributes;for(let f_=0, f$=f0.length-1;f_<=f$;f_++){ const f1=f0.item(f_).name.toLowerCase();const f2=f0.item(f_).nodeValue;let f3=f2==""?f1:f2.toLowerCase();fZ.set_Item(f1, f3);if(!fY.SAdd(f1))console.warn("Hole mapped twice", f1);} for(let ga=0, gb=fO.childNodes.length-1;ga<=gb;ga++){ const f4=fO.childNodes[ga];if(V(f4.nodeType, Node.ELEMENT_NODE))if(!fY.SAdd(f4.nodeName.toLowerCase()))console.warn("Hole filled twice", fT);} const f5=fO.childNodes.length===1&&V(fO.firstChild.nodeType, Node.TEXT_NODE);if(f5){ const f6=dm(fX, fO.firstChild.textContent, fT);const f7=((gc) =>(gd) => gc.SAdd(gd))(fY);let f8=((gc) =>(gd) => { if(gd!=null)gc(gd.$0);})((gc) => { f7(gc);});f8(f6);} dn(fX, fY);if(!f5){ for(let gc=0, gd=fO.childNodes.length-1;gc<=gd;gc++){ const f9=fO.childNodes[gc];if(V(f9.nodeType, Node.ELEMENT_NODE))if(f9.hasAttributes())do_1(fX, f9);else fH(fX, f9);} } dp(fX, fZ);dq(fX, fO.parentNode, fO);fO.parentNode.removeChild(fO);return;} } break;} } function fH(fN, fO){ const fP=fO.nodeName.toLowerCase();const fQ=(fU, fV) => { if(fP=="title"&&fO.hasChildNodes()){ const fW=dt(fO.textContent);fO.removeChild(fO.firstChild);while(fW.hasChildNodes())fO.appendChild(fW.firstChild);} fI(fO);return dq(fO, fU, fV);};H(fN, "[ws-attr-holes]", (fU) => { const fV=bt(fU.getAttribute("ws-attr-holes"), [" "], 1);for(let fZ=0, f0=fV.length-1;fZ<=f0;fZ++){ const fW=bR(fV, fZ);let fX=new RegExp("\\${"+fP+"}", "ig");let fY=fU.getAttribute(fW).replace(fX, fO.textContent);fU.setAttribute(fW, fY);} });const fR=fN.querySelector("[ws-hole="+fP+"]");if(V(fR, null)){ const fS=fN.querySelector("[ws-replace="+fP+"]");if(V(fS, null)){ const fT=fN.querySelector("slot[name="+fP+"]");return fN.tagName.toLowerCase()=="template"?(fQ(fT.parentNode, fT),void fT.parentNode.removeChild(fT)):null;} else { fQ(fS.parentNode, fS);fS.parentNode.removeChild(fS);return;} } else { while(fR.hasChildNodes())fR.removeChild(fR.lastChild);fR.removeAttribute("ws-hole");return fQ(fR, null);} } function fI(fN){ if(!fN.hasAttribute("ws-preserve"))if(bu(fN.nodeName.toLowerCase(), "ws-"))fK(fN);else { dr(fN);fJ(fN.firstChild);} } function fJ(fN){ return fG(0, fN);} function fK(fN){ return fG(1, fN);} function fL(fN){ while(true){ const fO=fN.querySelector("[ws-template]");if(V(fO, null)){ const fP=fN.querySelector("[ws-children-template]");if(V(fP, null)){ const fQ=fN.querySelectorAll("template[id]");for(let fW=1, fX=fQ.length-1;fW<=fX;fW++){ const fR=fQ[fW];if(fF.Contains(fR)){ } else { G(fB, u0038(fR.getAttribute("id")), fR, null);fF.SAdd(fR);} } const fS=fN.querySelectorAll("template[name]");for(let fY=1, fZ=fS.length-1;fY<=fZ;fY++){ const fT=fS[fY];if(fF.Contains(fT)){ } else { G(fB, u0038(fT.getAttribute("name")), fT, null);fF.SAdd(fT);} } return null;} else { const fU=fP.getAttribute("ws-children-template");fP.removeAttribute("ws-children-template");G(fB, u0038(fU), fP, null);fN=fN;} } else { const fV=fO.getAttribute("ws-template");(I(fB, u0038(fV), fO))(null);fN=fN;} } } const fM=(fC==null?"":fC.$0).toLowerCase();C(fB).set_Item(fM, fD);if(fD.hasChildNodes()){ fL(fD);fJ(fD.firstChild);} }
function H(fB, fC, fD){ dz(fB, fC, (fE) => { if(fE.closest("[ws-preserve]")==null)fD(fE);});}
function I(fB, fC, fD){ const fE=D(fD);return(fF) => { G(fB, fC, fE, fF);};}
function J(){ return bQ.TextHoleRE;}
class K { Equals(fB){ return this===fB;} GetHashCode(){ return -1;} }
class L extends K { docNode;updates;static RunById(fB, fC){ const fD=globalThis.document.getElementById(fB);if(V(fD, null))P("invalid id: "+fB);else L.Run(fD, fC);} static Run(fB, fC){ cg(fB, fC.docNode);L.RunInPlace(false, fB, fC);} static get Empty(){ return L.Mk(null, cR());} static RunInPlace(fB, fC, fD){ const fE=ci(fC, fD.docNode);cS(dN()||dU()?dV(cj(fB, fE, fD.docNode)):() => { ck(fB, fE, fD.docNode);}, fD.updates);} static TextNode(fB){ return L.Mk(ca(globalThis.document.createTextNode(fB)), cR());} static Input(fB, fC){ return L.InputInternal("input", () => bX(fB, [cO(fC)]));} static BindView(fB, fC){ return L.EmbedView(cT(fB, fC));} static Mk(fB, fC){ return new L(fB, fC);} static Element(fB, fC, fD){ const fE=cM.Concat(fC);const fF=L.Concat(fD);return e3.New(globalThis.document.createElement(fB), fE, fF);} static InputInternal(fB, fC){ const fD=globalThis.document.createElement(fB);return e3.New(fD, cM.Concat(fC(fD)), L.Empty);} static EmbedView(fB){ const fC=cs();return L.Mk(cb(fC), cT(() => { }, cU((fD) => { ct(fC, fD.docNode);return fD.updates;}, fB)));} static Concat(fB){ return e5(L.Empty, L.Append, e4(fB));} static Append(fB, fC){ return L.Mk(cd(fB.docNode, fC.docNode), cX(fB.updates, fC.updates));} constructor(fB, fC){ super();this.docNode=fB;this.updates=fC;} }
function M(fB){ const fC={};const fD=dC(fB);try { while(fD.MoveNext()){ const fE=fD.Current;fC[fE[0]]=fE[1];} } finally { if(typeof fD=="object"&&a(fD))fD.Dispose();} return fC;}
let N=fw((fB) => class fC { static { N=fB(this);} static mainView;static nameInputView;static gameStateVar;static playerNamesVar;static random;static emojis;static { this.emojis=u0039(["\ud83d\udc36", "\ud83d\udc31", "\ud83e\udd8a", "\ud83d\udc3c", "\ud83d\udc35", "\ud83d\udc38", "\ud83d\udc19", "\ud83e\udd84"]);this.random=new u0037();this.playerNamesVar=bp.Create_1(null);this.gameStateVar=bp.Create_1(g(8, u0039(["Játékos1", "Játékos2"])));const fD=bp.Create_1("");const fE=bp.Create_1("");let fF=L.Element("div", [cM.Create("style", "margin: 2rem;")], [L.Element("h3", [], [L.TextNode("Add meg a játékosok neveit:")]), L.Element("div", [], [L.Element("label", [], [L.TextNode("Játékos 1: ")]), L.Input([], fD)]), L.Element("div", [cM.Create("style", "margin-top: 1rem;")], [L.Element("label", [], [L.TextNode("Játékos 2: ")]), L.Input([], fE)]), L.Element("button", [cM.Create("style", "margin-top: 1rem;"), cN("click", () => { const fG=$((fH) => fH==""?"Névtelen":fH, u0039([fD.Get(), fE.Get()]));h().Set(u0038(fG));f().Set(g(8, fG));return(fH) => { d(fH);};})], [L.TextNode("\u25b6\ufe0f Játék indítása")])]);this.nameInputView=fF;this.mainView=L.BindView((fG) => fG==null?i():L.Element("div", [cM.Create("class", "game-board")], [L.BindView(j, f().View), L.BindView(k, f().View), L.BindView((fH) => { if(fH.IsGameOver){ const fI=bc((fL) => fL.Score, fH.Players).Score;ba((fL) => fL.Lives<=0, fH.Players);const fJ=bb((fL) => fL.Score===fI, fH.Players);const fK=fJ.Length===1?"\ud83c\udfc6 A gy\u0151ztes: "+bg(fJ).Name+"!":"\ud83e\udd1d Döntetlen! Gy\u0151ztesek: "+bs(", ", $((fL) => fL.Name, fJ));return L.Element("div", [cM.Create("style", "margin-top:1rem;")], [L.Element("div", [cM.Create("style", "color:red; font-weight:bold; margin-bottom:0.5rem;")], [L.TextNode("Véget ért a játék!")]), L.Element("div", [cM.Create("style", "margin-bottom:0.5rem; color:blue; font-weight:bold;")], [L.TextNode(fK)]), L.Element("button", [cM.Create("class", "restart-button"), cN("click", () => l)], [L.TextNode("\ud83d\udd01 Új játék indítása")])]);} else return L.Empty;}, f().View)]), h().View);} });
class O extends K { }
function P(fB){ throw new Error(fB);}
function Q(fB){ return[fB.K, fB.V];}
function R(fB, fC){ const fD=1+fC-fB;return fD<=0?[]:b7(fD, (fE) => fE+fB);}
function S(fB, fC, fD, fE, fF, fG){ return{Cards:fB, Flipped:fC, Players:fD, CurrentPlayer:fE, IsGameOver:fF, Streak:fG};}
function T(fB){ let fC=[];let fD;for(var fE in fB)fC.push(fB[fE]);return fC;}
class U extends K { equals;hash;count;data;set_Item(fB, fC){ this.set(fB, fC);} ContainsKey(fB){ const fC=this.data[this.hash(fB)];return fC==null?false:c6((fD) => this.equals.apply(null, [(Q(fD))[0], fB]), fC);} TryGetValue(fB, fC){ const fD=this.data[this.hash(fB)];if(fD==null)return false;else { const fE=c7((fF) => { const fG=Q(fF);return this.equals.apply(null, [fG[0], fB])?u0038(fG[1]):null;}, fD);return fE!=null&&fE.$==1&&(fC.set(fE.$0),true);} } RemoveKey(fB){ return this.remove(fB);} get Keys(){ return new dL(this);} set(fB, fC){ const fD=this.hash(fB);const fE=this.data[fD];if(fE==null){ this.count=this.count+1;this.data[fD]=new Array({K:fB, V:fC});} else { const fF=c8((fG) => this.equals.apply(null, [(Q(fG))[0], fB]), fE);if(fF==null){ this.count=this.count+1;fE.push({K:fB, V:fC});} else fE[fF.$0]={K:fB, V:fC};} } remove(fB){ const fC=this.hash(fB);const fD=this.data[fC];if(fD==null)return false;else { const fE=c_((fF) =>!this.equals.apply(null, [(Q(fF))[0], fB]), fD);return bS(fE)<fD.length&&(this.count=this.count-1,this.data[fC]=fE,true);} } Item(fB){ return this.get(fB);} get(fB){ const fC=this.data[this.hash(fB)];return fC==null?c5():de((fD) => { const fE=Q(fD);return this.equals.apply(null, [fE[0], fB])?u0038(fE[1]):null;}, fC);} GetEnumerator(){ return dF(dg(T(this.data)));} static New_5(){ return new this("New_5");} static New_6(fB, fC, fD){ return new this("New_6", fB, fC, fD);} constructor(fB, fC, fD, fE){ if(fB=="New_5"){ fB="New_6";fC=[];fD=V;fE=u0031;} if(fB=="New_6"){ const fF=fC;const fG=fD;const fH=fE;super();this.equals=fG;this.hash=fH;this.count=0;this.data=[];const fI=dC(fF);try { while(fI.MoveNext()){ const fJ=fI.Current;this.set(fJ.K, fJ.V);} } finally { if(typeof fI=="object"&&a(fI))fI.Dispose();} } } }
function V(fB, fC){ if(fB===fC)return true;else { const fD=typeof fB;if(fD=="object"){ if(fB===null||fB===void 0||fC===null||fC===void 0||!V(typeof fC, "object"))return false;else if("Equals"in fB)return fB.Equals(fC);else if("Equals"in fC)return false;else if(fB instanceof Array&&fC instanceof Array)return W(fB, fC);else if(fB instanceof Date&&fC instanceof Date)return X(fB, fC);else { const fE=[true];let fF;for(var fH in fB)if(((fI) => { fE[0]=!fB.hasOwnProperty(fI)||fC.hasOwnProperty(fI)&&V(fB[fI], fC[fI]);return!fE[0];})(fH))break;if(fE[0]){ let fG;for(var fI in fC)if(((fJ) => { fE[0]=!fC.hasOwnProperty(fJ)||fB.hasOwnProperty(fJ);return!fE[0];})(fI))break;} return fE[0];} } else return fD=="function"&&("$Func"in fB?fB.$Func===fC.$Func&&fB.$Target===fC.$Target:"$Invokes"in fB&&"$Invokes"in fC&&W(fB.$Invokes, fC.$Invokes));} }
function W(fB, fC){ let fD;let fE;if(bS(fB)===bS(fC)){ fD=true;fE=0;while(fD&&fE<bS(fB)){!V(bR(fB, fE), bR(fC, fE))?fD=false:void 0;fE=fE+1;} return fD;} else return false;}
function X(fB, fC){ return fB.getTime()===fC.getTime();}
function Y(fB, fC){ if(fB===fC)return 0;else { const fD=typeof fB;switch(fD=="function"?1:fD=="boolean"?2:fD=="number"?2:fD=="string"?2:fD=="object"?3:0){ case 0:return typeof fC=="undefined"?0:-1;case 1:return P("Cannot compare function values.");case 2:return fB<fC?-1:1;case 3:if(fB===null)return -1;else if(fC===null)return 1;else if("CompareTo"in fB)return fB.CompareTo(fC);else if("CompareTo0"in fB)return fB.CompareTo0(fC);else if(fB instanceof Array&&fC instanceof Array)return Z(fB, fC);else if(fB instanceof Date&&fC instanceof Date)return u0030(fB, fC);else { const fE=[0];let fF;for(var fH in fB)if(((fI) =>!fB.hasOwnProperty(fI)?false:!fC.hasOwnProperty(fI)?(fE[0]=1,true):(fE[0]=Y(fB[fI], fC[fI]),fE[0]!==0))(fH))break;if(fE[0]===0){ let fG;for(var fI in fC)if(((fJ) =>!fC.hasOwnProperty(fJ)?false:!fB.hasOwnProperty(fJ)&&(fE[0]=-1,true))(fI))break;} return fE[0];} break;} } }
function Z(fB, fC){ let fD;let fE;if(bS(fB)<bS(fC))return -1;else if(bS(fB)>bS(fC))return 1;else { fD=0;fE=0;while(fD===0&&fE<bS(fB)){ fD=Y(bR(fB, fE), bR(fC, fE));fE=fE+1;} return fD;} }
function u0030(fB, fC){ return Y(fB.getTime(), fC.getTime());}
function u0031(fB){ const fC=typeof fB;return fC=="function"?0:fC=="boolean"?fB?1:0:fC=="number"?fB:fC=="string"?u0032(fB):fC=="object"?fB==null?0:fB instanceof Array?u0033(fB):u0034(fB):0;}
function u0032(fB){ let fC;if(fB===null)return 0;else { fC=5381;for(let fD=0, fE=fB.length-1;fD<=fE;fD++)fC=u0035(fC, fB[fD].charCodeAt());return fC;} }
function u0033(fB){ let fC=-34948909;for(let fD=0, fE=bS(fB)-1;fD<=fE;fD++)fC=u0035(fC, u0031(bR(fB, fD)));return fC;}
function u0034(fB){ if("GetHashCode"in fB)return fB.GetHashCode();else { const fC=[0];let fD;for(var fE in fB)if(((fF) => { fC[0]=u0035(u0035(fC[0], u0032(fF)), u0031(fB[fF]));return false;})(fE))break;return fC[0];} }
function u0035(fB, fC){ return(fB<<5)+fB+fC;}
class u0036 { get Length(){ return bf(this);} get_Item(fB){ return b2(fB, this);} static Empty=fx(u0036, {$:0});static Cons(fB, fC){ return fx(u0036, {$:1, $0:fB, $1:fC});} GetEnumerator(){ return new eC(this, null, (fB) => { const fC=fB.s;return fC.$==0?false:(fB.c=fC.$0,fB.s=fC.$1,true);}, void 0);} }
class u0037 extends K { Next_2(){ return Math.floor(Math.random()*2147483648);} }
function u0038(fB){ return{$:1, $0:fB};}
function u0039(fB){ let fC=u0036.Empty;for(let fD=bS(fB)-1, fE=0;fD>=fE;fD--)fC=u0036.Cons(bR(fB, fD), fC);return fC;}
function $(fB, fC){ let fD;let fE;let fF;if(fC.$==0)return fC;else { const fG=fx(u0036, {$:1});fD=fG;fE=fC;fF=true;while(fF){ fD.$0=fB(fE.$0);fE=fE.$1;if(fE.$==0)fF=false;else { const fH=fx(u0036, {$:1});fD=(fD.$1=fH,fH);} } fD.$1=u0036.Empty;return fG;} }
function ba(fB, fC){ let fD=false;let fE=fC;while(!fD&&fE.$==1){ fD=fB(fE.$0);fE=fE.$1;} return fD;}
function bb(fB, fC){ let fD;let fE;let fF;let fG;if(fC.$==0)return fC;else { fD=u0036.Empty;fE=fD;fF=fC;fG=true;while(fG){ if(fB(fF.$0)){ if(fD.$==0){ fD=fx(u0036, {$:1});fE=fD;} else { const fH=fx(u0036, {$:1});fE=(fE.$1=fH,fH);} const fI=fF.$0;fE.$=1;fE.$0=fI;} fF=fF.$1;if(fF.$==0)fG=false;} if(!(fD.$==0))fE.$1=u0036.Empty;return fD;} }
function bc(fB, fC){ bh(fC);let fD=fC.$0;let fE=fB(fD);let fF=fC.$1;while(fF.$==1){ const fG=fF.$0;const fH=fB(fG);if(Y(fH, fE)===1){ fD=fG;fE=fH;} fF=fF.$1;} return fD;}
function bd(fB, fC){ let fD;let fE;let fF;let fG;if(fC.$==0)return fC;else { const fH=fx(u0036, {$:1});fD=fH;fE=fC;fF=0;fG=true;while(fG){ fD.$0=fB(fF, fE.$0);fE=fE.$1;if(fE.$==0)fG=false;else { const fI=fx(u0036, {$:1});fD=(fD.$1=fI,fI);fF=fF+1;} } fD.$1=u0036.Empty;return fH;} }
function be(fB, fC){ let fD=true;let fE=fC;while(fD&&fE.$==1){ fD=fB(fE.$0);fE=fE.$1;} return fD;}
function bf(fB){ let fC=fB;let fD=0;while(fC.$==1){ fC=bm(fC);fD=fD+1;} return fD;}
function bg(fB){ return fB.$==1?fB.$0:bk();}
function bh(fB){ if(fB.$==0)bk();}
function bi(fB, fC){ return bl(b1(fB, fC));}
function bj(fB, fC){ const fD=dc(fC);dd(fB, fD);return u0039(fD);}
function bk(){ return P("The input list was empty.");}
function bl(fB){ if(fB instanceof u0036)return fB;else if(fB instanceof Array)return u0039(fB);else { const fC=dC(fB);try { let fD;let fE=fC.MoveNext();if(!fE)return u0036.Empty;else { const fF=fx(u0036, {$:1});fD=fF;while(fE){ fD.$0=fC.Current;if(fC.MoveNext()){ const fG=fx(u0036, {$:1});fD=(fD.$1=fG,fG);} else fE=false;} fD.$1=u0036.Empty;return fF;} } finally { if(typeof fC=="object"&&a(fC))fC.Dispose();} } }
function bm(fB){ return fB.$==1?fB.$1:bk();}
function bn(fB, fC){ let fD=false;let fE=fC;while(!fD&&fE.$==1){ fD=V(fB, fE.$0);fE=fE.$1;} return fD;}
function bo(fB, fC){ let fD;let fE;let fF;if(fB.$==0)return fC;else if(fC.$==0)return fB;else { const fG=fx(u0036, {$:1});fD=fG;fE=fB;fF=true;while(fF){ fD.$0=fE.$0;fE=fE.$1;if(fE.$==0)fF=false;else { const fH=fx(u0036, {$:1});fD=(fD.$1=fH,fH);} } fD.$1=fC;return fG;} }
let bp=fw((fB) => class fC extends K { static { bp=fB(this);} static Create_1(fD){ return new cy(false, {s:dZ(fD, [])}, fD);} static { } });
class bq extends K { }
function br(fB, fC, fD, fE){ return{Name:fB, Score:fC, TimeLeft:fD, Lives:fE};}
function bs(fB, fC){ return c9(fC).join(fB);}
function bt(fB, fC, fD){ return bv(fB, new RegExp("["+bw(fC.join(""))+"]"), fD);}
function bu(fB, fC){ return fB.substring(0, fC.length)==fC;}
function bv(fB, fC, fD){ return fD===1?c_((fE) => fE!=="", bx(fB, fC)):bx(fB, fC);}
function bw(fB){ return fB.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]", "g"), "\\$&");}
function bx(fB, fC){ return fB.split(fC);}
function by(fB, fC){ return b_(fB, bz(fC));}
function bz(fB){ return fB==null?"":fB;}
function bA(fB){ return(fC) => { try {(fB())(fC);} catch(fD){ fC.k(cZ(fD));} };}
function bB(fB, fC){ return bG((fD) => { fB(cY((fE) => { if(fE.$==0){ const fF=fE.$0;bL().Fork(() => { try {(fC(fF))(fD);} catch(fG){ fD.k(cZ(fG));} });} else bL().Fork(() => { fD.k(fE);});}, fD.ct));});}
function bC(fB){ return(fC) => { let fD;let fE;fD=void 0;fE=void 0;fD=setTimeout(() => { fE.Dispose();bL().Fork(() => { fC.k(c0(null));});}, fB);fE=bH(fC.ct, () => { clearTimeout(fD);bL().Fork(() => { bI(fC);});});};}
function bD(fB){ return(fC) => { fC.k(c0(fB));};}
function bE(){ return c2.Zero;}
function bF(fB, fC){ const fD=(bJ())[0];const fE=fC==null?fD:fC.$0;bL().Fork(() => { if(!fE.c)fB(cY((fF) => { if(fF.$==1)bK(fF.$0);}, fE));});}
function bG(fB){ return(fC) => { if(fC.ct.c)bI(fC);else fB(fC);};}
function bH(fB, fC){ if(fB===bM())return{Dispose(){ return null;}};else { const fD=fB.r.push(fC)-1;return{Dispose(){ return bU(fB.r, fD, () => { });}};} }
function bI(fB){ fB.k(c1(new eh("New", fB.ct)));}
function bJ(){ return c2.defCTS;}
function bK(fB){ console.log("WebSharper: Uncaught asynchronous exception", fB);}
function bL(){ return c2.scheduler;}
function bM(){ return c2.noneCT;}
function bN(fB){ return(fC) => { const fD=[false];const fE=(fF) => { if(fD[0])P("A continuation provided by Async.FromContinuations was invoked multiple times");else { fD[0]=true;bL().Fork(fF);} };fB((fF) => { fE(() => { fC.k(c0(fF));});}, (fF) => { fE(() => { fC.k(cZ(fF));});}, (fF) => { fE(() => { fC.k(c1(fF));});});};}
function bO(fB, fC, fD, fE){ return{Id:fB, Value:fC, IsFlipped:fD, IsMatched:fE};}
function bP(fB, fC){ return fo(fB, -2147483648, 2147483647, fC);}
let bQ=fw((fB) => class fC { static { bQ=fB(this);} static RenderedFullDocTemplate;static TextHoleRE;static GlobalHoles;static LocalTemplatesLoaded;static LoadedTemplates;static { this.LoadedTemplates=new U("New_5");this.LocalTemplatesLoaded=false;this.GlobalHoles=new U("New_5");this.TextHoleRE="\\${([^}]+)}";this.RenderedFullDocTemplate=null;} });
function bR(fB, fC){ bT(fB, fC);return fB[fC];}
function bS(fB){ return fB.dims===2?fB.length*fB.length:fB.length;}
function bT(fB, fC){ if(fC<0||fC>=fB.length)P("Index was outside the bounds of the array.");}
function bU(fB, fC, fD){ bT(fB, fC);fB[fC]=fD;}
class bV extends K { equals;hash;data;count;SAdd(fB){ return this.add(fB);} Contains(fB){ const fC=this.data[this.hash(fB)];return fC==null?false:this.arrContains(fB, fC);} add(fB){ const fC=this.hash(fB);const fD=this.data[fC];return fD==null?(this.data[fC]=[fB],this.count=this.count+1,true):this.arrContains(fB, fD)?false:(fD.push(fB),this.count=this.count+1,true);} arrContains(fB, fC){ let fD=true;let fE=0;const fF=fC.length;while(fD&&fE<fF)if(this.equals.apply(null, [fC[fE], fB]))fD=false;else fE=fE+1;return!fD;} GetEnumerator(){ return dC(ff(this.data));} ExceptWith(fB){ const fC=dC(fB);try { while(fC.MoveNext())this.Remove(fC.Current);} finally { if(typeof fC=="object"&&a(fC))fC.Dispose();} } get Count(){ return this.count;} IntersectWith(fB){ const fC=new bV("New_4", fB, this.equals, this.hash);const fD=ff(this.data);for(let fF=0, fG=fD.length-1;fF<=fG;fF++){ const fE=fD[fF];if(!fC.Contains(fE))this.Remove(fE);} } Remove(fB){ const fC=this.data[this.hash(fB)];return fC==null?false:this.arrRemove(fB, fC)&&(this.count=this.count-1,true);} CopyTo(fB, fC){ const fD=ff(this.data);for(let fE=0, fF=fD.length-1;fE<=fF;fE++)bU(fB, fE+fC, fD[fE]);} arrRemove(fB, fC){ let fD=true;let fE=0;const fF=fC.length;while(fD&&fE<fF)if(this.equals.apply(null, [fC[fE], fB])){ fC.splice(fE, 1);fD=false;} else fE=fE+1;return!fD;} static New_3(){ return new this("New_3");} static New_4(fB, fC, fD){ return new this("New_4", fB, fC, fD);} static New_2(fB){ return new this("New_2", fB);} constructor(fB, fC, fD, fE){ if(fB=="New_3"){ fB="New_4";fC=[];fD=V;fE=u0031;} let fF;if(fB=="New_2"){ fF=fC;fB="New_4";fC=fF;fD=V;fE=u0031;} if(fB=="New_4"){ const fG=fC;const fH=fD;const fI=fE;super();this.equals=fH;this.hash=fI;this.data=[];this.count=0;const fJ=dC(fG);try { while(fJ.MoveNext())this.add(fJ.Current);} finally { if(typeof fJ=="object"&&a(fJ))fJ.Dispose();} } } }
function bW(fB){ const fC=dC(fB);try { return fC.MoveNext()?fC.Current:dG();} finally { if(typeof fC=="object"&&a(fC))fC.Dispose();} }
function bX(fB, fC){ return{GetEnumerator:() => { const fD=dC(fB);const fE=[true];return new eC(fD, null, (fF) => { if(fF.s.MoveNext()){ fF.c=fF.s.Current;return true;} else { const fG=fF.s;if(!V(fG, null))fG.Dispose();fF.s=null;return fE[0]&&(fE[0]=false,fF.s=dC(fC),fF.s.MoveNext()?(fF.c=fF.s.Current,true):(fF.s.Dispose(),fF.s=null,false));} }, (fF) => { const fG=fF.s;if(!V(fG, null))fG.Dispose();});}};}
function bY(fB){ return{GetEnumerator:() => dC(fB())};}
function bZ(fB, fC, fD){ let fE=fC;const fF=dC(fD);try { while(fF.MoveNext())fE=fB(fE, fF.Current);return fE;} finally { if(typeof fF=="object"&&a(fF))fF.Dispose();} }
function b0(fB, fC){ fB<0?dH():void 0;return{GetEnumerator:() => { const fD=[dC(fC)];return new eC(0, null, (fE) => { fE.s=fE.s+1;if(fE.s>fB)return false;else { const fF=fD[0];return V(fF, null)?dG():fF.MoveNext()?(fE.c=fF.Current,fE.s===fB?(fF.Dispose(),fD[0]=null):void 0,true):(fF.Dispose(),fD[0]=null,dG());} }, () => { const fE=fD[0];if(!V(fE, null))fE.Dispose();});}};}
function b1(fB, fC){ return b3(b4(fB, fC));}
function b2(fB, fC){ if(fB<0)P("negative index requested");let fD=-1;const fE=dC(fC);try { while(fD<fB){!fE.MoveNext()?dG():void 0;fD=fD+1;} return fE.Current;} finally { if(typeof fE=="object"&&a(fE))fE.Dispose();} }
function b3(fB){ return{GetEnumerator:() => { const fC=dC(fB);function fD(fE){ while(true){ const fF=fE.s;if(V(fF, null)){ if(fC.MoveNext()){ fE.s=dC(fC.Current);fE=fE;} else { fC.Dispose();return false;} } else if(fF.MoveNext()){ fE.c=fF.Current;return true;} else { fE.Dispose();fE.s=null;fE=fE;} } } return new eC(null, null, fD, (fE) => { const fF=fE.s;if(!V(fF, null))fF.Dispose();if(!V(fC, null))fC.Dispose();});}};}
function b4(fB, fC){ return{GetEnumerator:() => { const fD=dC(fC);return new eC(null, null, (fE) => fD.MoveNext()&&(fE.c=fB(fD.Current),true), () => { fD.Dispose();});}};}
function b5(fB, fC){ const fD=dC(fC);try { while(fD.MoveNext())fB(fD.Current);} finally { if(typeof fD=="object"&&a(fD))fD.Dispose();} }
function b6(fB){ const fC=dC(fB);try { if(!fC.MoveNext())b8();let fD=fC.Current;while(fC.MoveNext()){ const fE=fC.Current;if(Y(fE, fD)===1)fD=fE;} return fD;} finally { if(typeof fC=="object"&&a(fC))fC.Dispose();} }
function b7(fB, fC){ return b0(fB, b9(fC));}
function b8(){ return P("The input sequence was empty.");}
function b9(fB){ return{GetEnumerator:() => new eC(0, null, (fC) => { fC.c=fB(fC.s);fC.s=fC.s+1;return true;}, void 0)};}
function b_(fB, fC){ return!b$((fD) =>!fB(fD), fC);}
function b$(fB, fC){ const fD=dC(fC);try { let fE=false;while(!fE&&fD.MoveNext())fE=fB(fD.Current);return fE;} finally { if(typeof fD=="object"&&a(fD))fD.Dispose();} }
function ca(fB){ return{$:5, $0:fB};}
function cb(fB){ return{$:2, $0:fB};}
function cc(fB){ return{$:1, $0:fB};}
function cd(fB, fC){ return{$:0, $0:fB, $1:fC};}
class ce { }
class cf extends K { }
function cg(fB, fC){ ch(fB, fC, null);}
function ch(fB, fC, fD){ while(true){ if(fC!=null&&fC.$==1)return cl(fB, fC.$0.El, fD);else if(fC!=null&&fC.$==2){ const fE=fC.$0;fE.Dirty=false;fC=fE.Current;} else if(fC==null)return fD;else if(fC!=null&&fC.$==4)return cl(fB, fC.$0.Text, fD);else if(fC!=null&&fC.$==5)return cl(fB, fC.$0, fD);else if(fC!=null&&fC.$==6)return db((fH, fI) =>((((fJ) =>(fK) =>(fL) => fK==null||fK.constructor===Object?ch(fJ, fK, fL):cl(fJ, fK, fL))(fB))(fH))(fI), fC.$0.Els, fD);else { const fF=fC.$1;const fG=fC.$0;fC=fG;fD=ch(fB, fF, fD);} } }
function ci(fB, fC){ return ek(el(), cm(fB, d4(), fC));}
function cj(fB, fC, fD){ if(dN()){ const fE=null;return bA(() => { const fF=em(fD);const fG=cq(fC, fF);const fH=cp(fC, fF);return bB(dO(dP(fG, co(fC, fF))), () => bB(cn(fB, fC), () => bB(dO(fH), () => { fC.PreviousNodes=fF;return bD(null);})));});} else return cn(fB, fC);}
function ck(fB, fC, fD){ const fE=em(fD);cr(fB, fC.Top);fC.PreviousNodes=fE;}
function cl(fB, fC, fD){ dA(fB, fD, fC);return fC;}
function cm(fB, fC, fD){ cg(fB, fD);const fE=d3(fB, fC);return dM.New(fE, fD, null, fB, dW(), fy(fE.OnAfterRender));}
function cn(fB, fC){ if(dU()){ const fD=(fE) => { requestAnimationFrame(() => { cr(fB, fC.Top);fE();});};return bN((fE, fF, fG) => fD.apply(null, [fE, fF, fG]));} else { cr(fB, fC.Top);return bD(null);} }
function co(fB, fC){ return dS(c$((fD) => d6(fD.Attr), eq(ep(fC, eo((fD) => d5(fD.Attr), fB.PreviousNodes)))));}
function cp(fB, fC){ return dS(c$((fD) => d8(fD.Attr), eq(ep(fB.PreviousNodes, eo((fD) => d7(fD.Attr), fC)))));}
function cq(fB, fC){ const fD=(fF) => d9(fF.Attr);const fE=(fF) => eo(fD, fF);return dS(c$((fF) => d_(fF.Attr), eq(er(fE(fB.PreviousNodes), fE(fC)))));}
function cr(fB, fC){!fB?cu(fC):void 0;cv(fC.Children);cw(fC);}
function cs(){ return{Current:null, Dirty:false};}
function ct(fB, fC){ fB.Current=fC;fB.Dirty=true;}
function cu(fB){ function fC(fD){ function fE(fF){ while(true){ if(fF!=null&&fF.$==0){ const fG=fF.$1;const fH=fF.$0;if(fE(fH))return true;else fF=fG;} else if(fF!=null&&fF.$==2){ const fI=fF.$0;if(fI.Dirty)return true;else fF=fI.Current;} else if(fF!=null&&fF.$==6){ const fJ=fF.$0;return fJ.Dirty||c6(fC, fJ.Holes);} else return false;} } return fE(fD.Children);} eb(fB.El, fB.Attr);if(fC(fB))cx(fB);}
function cv(fB){ while(true){ if(fB!=null&&fB.$==1)return cr(false, fB.$0);else if(fB!=null&&fB.$==2){ const fC=fB.$0;fB=fC.Current;} else if(fB==null)return null;else if(fB!=null&&fB.$==5)return null;else if(fB!=null&&fB.$==4){ const fD=fB.$0;return fD.Dirty?(fD.Text.nodeValue=fD.Value,fD.Dirty=false):null;} else if(fB!=null&&fB.$==6){ const fE=fB.$0;da((fH) => { cr(false, fH);}, fE.Holes);da((fH) => { eb(fH[0], fH[1]);}, fE.Attrs);return cw(fE);} else { const fF=fB.$1;const fG=fB.$0;cv(fG);fB=fF;} } }
function cw(fB){ const fC=fy(fB.Render);if(fC!=null&&fC.$==1){ fC.$0(fB.El);fz(fB, "Render", null);} }
function cx(fB){ const fC=fB.El;function fD(fH, fI){ while(true){ if(fH!=null&&fH.$==1)return fH.$0.El;else if(fH!=null&&fH.$==2){ const fJ=fH.$0;if(fJ.Dirty){ fJ.Dirty=false;return ch(fC, fJ.Current, fI);} else fH=fJ.Current;} else if(fH==null)return fI;else if(fH!=null&&fH.$==4)return fH.$0.Text;else if(fH!=null&&fH.$==5)return fH.$0;else if(fH!=null&&fH.$==6){ const fK=fH.$0;if(fK.Dirty)fK.Dirty=false;return db((fN, fO) => fN==null||fN.constructor===Object?fD(fN, fO):fN, fK.Els, fI);} else { const fL=fH.$1;const fM=fH.$0;fH=fM;fI=fD(fL, fI);} } } const fE=fB.El;fi((fH) => { dB(fE, fH);}, fh(fj(fB), fg(fB.El, fy(fB.Delimiters))));let fF=fB.Children;const fG=fy(fB.Delimiters);fD(fF, fG!=null&&fG.$==1?fG.$0[1]:null);}
class cy extends O { isConst;current;snap;view;id;get View(){ return this.view;} Set(fB){ if(this.isConst)(((fC) => fC("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((fC) => { console.log(fC);}));else { eB(this.snap);this.current=fB;this.snap={s:dZ(fB, [])};} } Get(){ return this.current;} UpdateMaybe(fB){ const fC=fB(this.Get());if(fC!=null&&fC.$==1)this.Set(fC.$0);} constructor(fB, fC, fD){ super();this.isConst=fB;this.current=fD;this.snap=fC;this.view=() => this.snap;this.id=dW();} }
function cz(fB, fC, fD){ const fE=fB.s;if(fE==null)fD();else fE!=null&&fE.$==2?(fE.$1.push(fD),fC(fE.$0)):fE!=null&&fE.$==3?(fE.$0.push(fC),fE.$1.push(fD)):fC(fE.$0);}
function cA(fB, fC){ const fD=fC.s;if(fD!=null&&fD.$==0)return{s:d0(fB(fD.$0))};else { const fE={s:d1([], [])};cC(fC, (fF) => { cD(fE, fC, fB(fF));}, fE);return fE;} }
function cB(fB, fC){ const fD=fB.s;if(fD==null)fC();else fD!=null&&fD.$==2?fD.$1.push(fC):fD!=null&&fD.$==3?fD.$1.push(fC):void 0;}
function cC(fB, fC, fD){ const fE=fB.s;if(fE==null)eB(fD);else fE!=null&&fE.$==2?(cF(fE.$1, fD),fC(fE.$0)):fE!=null&&fE.$==3?(fE.$0.push(fC),cF(fE.$1, fD)):fC(fE.$0);}
function cD(fB, fC, fD){ const fE=fC.s;if(fE!=null&&fE.$==0)cG(fB, fD);else cH(fB, fD);}
function cE(fB){ const fC={s:d1([], [])};cC(fB, (fD) => { const fE=fD();cC(fE, (fF) => { let fG;const fH=fE.s;if(fH!=null&&fH.$==0){ const fI=fB.s;fG=fI!=null&&fI.$==0;} else fG=false;if(fG)cG(fC, fF);else cH(fC, fF);}, fC);}, fC);return fC;}
function cF(fB, fC){ fB.push(fC);if(fB.length%20===0){ const fD=fB.slice(0);ft(fB);for(let fF=0, fG=bS(fD)-1;fF<=fG;fF++){ const fE=bR(fD, fF);if(typeof fE=="object")(((fH) => { if(fH.s)fB.push(fH);})(fE));else(((fH) => { fB.push(fH);})(fE));} } else void 0;}
function cG(fB, fC){ const fD=fB.s;if(fD!=null&&fD.$==3){ fB.s=d0(fC);const fE=fD.$0;for(let fF=0, fG=bS(fE)-1;fF<=fG;fF++)(bR(fE, fF))(fC);} else void 0;}
function cH(fB, fC){ const fD=fB.s;if(fD!=null&&fD.$==3){ fB.s=dZ(fC, fD.$1);const fE=fD.$0;for(let fF=0, fG=bS(fE)-1;fF<=fG;fF++)(bR(fE, fF))(fC);} else void 0;}
function cI(fB){ const fC=fB.s;if(fC==null)return fB;else if(fC!=null&&fC.$==2){ const fD={s:dZ(fC.$0, [])};cK(fB, fD);return fD;} else if(fC!=null&&fC.$==3){ const fE={s:d1([], [])};cC(fB, (fF) => { cD(fE, fB, fF);}, fE);return fE;} else return fB;}
function cJ(fB, fC){ const fD=fB.s;const fE=fC.s;if(fD!=null&&fD.$==0)return fE!=null&&fE.$==0?{s:d0(null)}:fC;else if(fE!=null&&fE.$==0)return fB;else { const fF={s:d1([], [])};const fG=() => { const fH=fF.s;if(!(fH!=null&&fH.$==0||fH!=null&&fH.$==2)){ const fI=cL(fB);const fJ=cL(fC);if(fI!=null&&fI.$==1)if(fJ!=null&&fJ.$==1)if(fI.$0[1]&&fJ.$0[1])cG(fF, null);else cH(fF, null);} };cC(fB, fG, fF);cC(fC, fG, fF);return fF;} }
function cK(fB, fC){ const fD=fB.s;if(fD==null)eB(fC);else fD!=null&&fD.$==2?cF(fD.$1, fC):fD!=null&&fD.$==3?cF(fD.$1, fC):void 0;}
function cL(fB){ const fC=fB.s;return fC!=null&&fC.$==0?u0038([fC.$0, true]):fC!=null&&fC.$==2?u0038([fC.$0, false]):null;}
class cM { static Create(fB, fC){ return d2((fD) => { fD.setAttribute(fB, fC);});} static Concat(fB){ const fC=e4(fB);return e5(d4(), cM.Append, fC);} static A3(fB){ return fx(cM, {$:3, $0:fB});} static Append(fB, fC){ return ed(fB, fC);} static A2(fB, fC){ return fx(cM, {$:2, $0:fB, $1:fC});} static A1(fB){ return fx(cM, {$:1, $0:fB});} }
function cN(fB, fC){ return d2((fD) => { fD.addEventListener(fB, (fE) =>(fC(fD))(fE), false);});}
function cO(fB){ return cP(eD(), fB);}
function cP(fB, fC){ const fD=fB(fC);return cM.Append(d2(fD[0]), cQ(fD[1], fD[2]));}
function cQ(fB, fC){ return ee(fC, fB);}
function cR(fB){ const fC={s:d0(fB)};return() => fC;}
function cS(fB, fC){ function fD(){ cz(fC(), fB, () => { bL().Fork(fD);});} bL().Fork(fD);}
function cT(fB, fC){ return cV(() => cA(fB, fC()));}
function cU(fB, fC){ return cW(cT(fB, fC));}
function cV(fB){ const fC={c:null, o:fB};return() => { let fD=fC.c;if(fD===null){ fD=fC.o();fC.c=fD;const fE=fD.s;if(fE!=null&&fE.$==0)fC.o=null;else cB(fD, () => { fC.c=null;});return fD;} else return fD;};}
function cW(fB){ return cV(() => cE(fB()));}
function cX(fB, fC){ return cV(() => cJ(fB(), fC()));}
function cY(fB, fC){ return{k:fB, ct:fC};}
function cZ(fB){ return{$:1, $0:fB};}
function c0(fB){ return{$:0, $0:fB};}
function c1(fB){ return{$:2, $0:fB};}
let c2=fw((fB) => class fC { static { c2=fB(this);} static GetCT;static Zero;static defCTS;static scheduler;static noneCT;static { this.noneCT=c3(false, []);this.scheduler=new eg();this.defCTS=[new ei()];this.Zero=bD();this.GetCT=(fD) => { fD.k(c0(fD.ct));};} });
function c3(fB, fC){ return{c:fB, r:fC};}
class c4 extends K { }
function c5(){ throw new e8("New");}
function c6(fB, fC){ let fD=false;let fE=0;while(!fD&&fE<bS(fC))if(fB(fC[fE]))fD=true;else fE=fE+1;return fD;}
function c7(fB, fC){ let fD=null;let fE=0;while(fE<fC.length&&fD==null){ const fF=fB(fC[fE]);if(fF!=null&&fF.$==1)fD=fF;fE=fE+1;} return fD;}
function c8(fB, fC){ let fD=null;let fE=0;while(fE<fC.length&&fD==null){ fB(fC[fE])?fD=u0038(fE):void 0;fE=fE+1;} return fD;}
function c9(fB){ if(fB instanceof Array)return fB.slice();else if(fB instanceof u0036)return dc(fB);else { const fC=[];const fD=dC(fB);try { while(fD.MoveNext())fC.push(fD.Current);return fC;} finally { if(typeof fD=="object"&&a(fD))fD.Dispose();} } }
function c_(fB, fC){ const fD=[];for(let fE=0, fF=fC.length-1;fE<=fF;fE++)if(fB(fC[fE]))fD.push(fC[fE]);return fD;}
function c$(fB, fC){ const fD=new Array(fC.length);for(let fE=0, fF=fC.length-1;fE<=fF;fE++)fD[fE]=fB(fC[fE]);return fD;}
function da(fB, fC){ for(let fD=0, fE=fC.length-1;fD<=fE;fD++)fB(fC[fD]);}
function db(fB, fC, fD){ let fE=fD;const fF=fC.length;for(let fG=1, fH=fF;fG<=fH;fG++)fE=fB(fC[fF-fG], fE);return fE;}
function dc(fB){ const fC=[];let fD=fB;while(!(fD.$==0)){ fC.push(bg(fD));fD=bm(fD);} return fC;}
function dd(fB, fC){ dJ((fD) => fD[0], dI((fD, fE) =>[fE, [fB(fE), fD]], fC).sort((fD, fE) => Y(fD[1], fE[1])));}
function de(fB, fC){ const fD=c7(fB, fC);return fD==null?P("KeyNotFoundException"):fD.$0;}
function df(fB, fC){ const fD=[];for(let fF=0, fG=fC.length-1;fF<=fG;fF++){ const fE=fB(fC[fF]);if(fE==null){ } else fD.push(fE.$0);} return fD;}
function dg(fB){ return Array.prototype.concat.apply([], c9(fB));}
function dh(fB, fC){ const fD=new Array(fB);for(let fE=0, fF=fB-1;fE<=fF;fE++)fD[fE]=fC;return fD;}
function di(fB, fC){ if(fB<0)P("Negative size given.");else null;const fD=new Array(fB);for(let fE=0, fF=fB-1;fE<=fF;fE++)fD[fE]=fC(fE);return fD;}
function dj(fB, fC){ let fD=true;let fE=0;while(fD&&fE<bS(fC))if(fB(fC[fE]))fE=fE+1;else fD=false;return fD;}
function dk(fB){ let fC=null;let fD=0;const fE=fB.textContent;const fF=new RegExp(J(), "g");while(fC=fF.exec(fE),fC!==null){ fB.parentNode.insertBefore(globalThis.document.createTextNode(ds(fE, u0038(fD), u0038(fF.lastIndex-bR(fC, 0).length-1))), fB);fD=fF.lastIndex;const fG=globalThis.document.createElement("span");fG.setAttribute("ws-replace", bR(fC, 1).toLowerCase());fB.parentNode.insertBefore(fG, fB);} fF.lastIndex=0;fB.textContent=ds(fE, u0038(fD), null);}
function dl(fB){ console.warn("Instantiating non-loaded template", fB);}
function dm(fB, fC, fD){ const fE=fB.querySelector("[ws-replace]");return V(fE, null)?(console.warn("Filling non-existent text hole", fD),null):(fE.parentNode.replaceChild(globalThis.document.createTextNode(fC), fE),u0038(fE.getAttribute("ws-replace")));}
function dn(fB, fC){ const fD=(fE) => { H(fB, "["+fE+"]", (fF) => { if(!fC.Contains(fF.getAttribute(fE)))fF.removeAttribute(fE);});};fD("ws-attr");fD("ws-onafterrender");fD("ws-var");H(fB, "[ws-hole]", (fE) => { if(!fC.Contains(fE.getAttribute("ws-hole"))){ fE.removeAttribute("ws-hole");while(fE.hasChildNodes())fE.removeChild(fE.lastChild);} });H(fB, "[ws-replace]", (fE) => { if(!fC.Contains(fE.getAttribute("ws-replace")))fE.parentNode.removeChild(fE);});H(fB, "[ws-on]", (fE) => { fE.setAttribute("ws-on", bs(" ", c_((fF) => fC.Contains(bR(bt(fF, [":"], 1), 1)), bt(fE.getAttribute("ws-on"), [" "], 1))));});H(fB, "[ws-attr-holes]", (fE) => { const fF=bt(fE.getAttribute("ws-attr-holes"), [" "], 1);for(let fJ=0, fK=fF.length-1;fJ<=fK;fJ++){ const fG=bR(fF, fJ);let fH=new RegExp(J(), "g");let fI=fE.getAttribute(fG).replace(fH, (fL, fM) => fC.Contains(fM)?fL:"");fE.setAttribute(fG, fI);} });}
function do_1(fB, fC){ dr(fC);const fD=fC.nodeName.toLowerCase();const fE=fB.querySelector("[ws-attr="+fD+"]");if(V(fE, null))console.warn("Filling non-existent attr hole", fD);else { fE.removeAttribute("ws-attr");for(let fG=0, fH=fC.attributes.length-1;fG<=fH;fG++){ const fF=fC.attributes.item(fG);if(fF.name=="class"&&fE.hasAttribute("class"))fE.setAttribute("class", fE.getAttribute("class")+" "+fF.nodeValue);else fE.setAttribute(fF.name, fF.nodeValue);} } }
function dp(fB, fC){ const fD=(fE) => { H(fB, "["+fE+"]", (fF) => { let fG;const fH=(fG=null,[fC.TryGetValue(fF.getAttribute(fE).toLowerCase(), {get:() => fG, set:(fI) => { fG=fI;}}), fG]);if(fH[0])fF.setAttribute(fE, fH[1]);});};fD("ws-hole");fD("ws-replace");fD("ws-attr");fD("ws-onafterrender");fD("ws-var");H(fB, "[ws-on]", (fE) => { fE.setAttribute("ws-on", bs(" ", c$((fF) => { let fG;const fH=bt(fF, [":"], 1);const fI=(fG=null,[fC.TryGetValue(bR(fH, 1), {get:() => fG, set:(fJ) => { fG=fJ;}}), fG]);return fI[0]?bR(fH, 0)+":"+fI[1]:fF;}, bt(fE.getAttribute("ws-on"), [" "], 1))));});H(fB, "[ws-attr-holes]", (fE) => { const fF=bt(fE.getAttribute("ws-attr-holes"), [" "], 1);for(let fG=0, fH=fF.length-1;fG<=fH;fG++)((() => { const fI=bR(fF, fG);return fE.setAttribute(fI, bZ((fJ, fK) => { const fL=Q(fK);return fJ.replace(new RegExp("\\${"+fL[0]+"}", "ig"), "${"+fL[1]+"}");}, fE.getAttribute(fI), fC));})());});}
function dq(fB, fC, fD){ while(true){ if(fB.hasChildNodes())fD=fC.insertBefore(fB.lastChild, fD);else return null;} }
function dr(fB){ const fC=fB.attributes;const fD=[];const fE=[];const fF=[];for(let fK=0, fL=fC.length-1;fK<=fL;fK++){ const fG=fC.item(fK);if(bu(fG.nodeName, "ws-on")&&fG.nodeName!="ws-onafterrender"&&fG.nodeName!="ws-on"){ fD.push(fG.nodeName);fE.push(ds(fG.nodeName, u0038("ws-on".length), null)+":"+fG.nodeValue.toLowerCase());} else if(!bu(fG.nodeName, "ws-")&&(new RegExp(J())).test(fG.nodeValue)){ let fH=new RegExp(J(), "g");let fI=fG.nodeValue.replace(fH, (fM, fN) =>"${"+fN.toLowerCase()+"}");fG.nodeValue=fI;fF.push(fG.nodeName);} else void 0;} if(!(fE.length==0))fB.setAttribute("ws-on", bs(" ", fE));if(!(fF.length==0))fB.setAttribute("ws-attr-holes", bs(" ", fF));const fJ=(fM) => { const fN=fB.getAttribute(fM);if(fN==null){ } else fB.setAttribute(fM, fN.toLowerCase());};fJ("ws-hole");fJ("ws-replace");fJ("ws-attr");fJ("ws-onafterrender");fJ("ws-var");da((fM) => { fB.removeAttribute(fM);}, fD);}
function ds(fB, fC, fD){ if(fC==null){ if(fD!=null&&fD.$==1){ const fE=fD.$0;return fE<0?"":fB.slice(0, fE+1);} else return"";} else if(fD==null)return fB.slice(fC.$0);else { const fF=fD.$0;return fF<0?"":fB.slice(fC.$0, fF+1);} }
function dt(fB){ const fC=globalThis.document.createElement("div");if(!du().test(fB)){ fC.appendChild(globalThis.document.createTextNode(fB));return fC;} else { const fD=dy().exec(fB);const fE=V(fD, null)?"":bR(fD, 1).toLowerCase();const fF=(dv())[fE];const fG=fF?fF:dw();fC.innerHTML=fG[1]+fB.replace(dx(), "<$1></$2>")+fG[2];function fH(fI, fJ){ while(true){ if(fJ===0)return fI;else { const fK=fJ;fI=fI.lastChild;fJ=fK-1;} } } return fH(fC, fG[0]);} }
function du(){ return eW.rhtml;}
function dv(){ return eW.wrapMap;}
function dw(){ return eW.defaultWrap;}
function dx(){ return eW.rxhtmlTag;}
function dy(){ return eW.rtagName;}
function dz(fB, fC, fD){ const fE=fB.querySelectorAll(fC);for(let fF=0, fG=fE.length-1;fF<=fG;fF++)fD(fE[fF]);}
function dA(fB, fC, fD){ let fE;if(fD.parentNode===fB){ const fF=fD.nextSibling;let fG=V(fF, null)?null:fF;fE=fC===fG;} else fE=false;if(!fE)fB.insertBefore(fD, fC);}
function dB(fB, fC){ if(fC.parentNode===fB)fB.removeChild(fC);}
function dC(fB){ return fB instanceof Array?dD(fB):V(typeof fB, "string")?dE(fB):fB.GetEnumerator();}
function dD(fB){ return new eC(0, null, (fC) => { const fD=fC.s;return fD<bS(fB)&&(fC.c=bR(fB, fD),fC.s=fD+1,true);}, void 0);}
function dE(fB){ return new eC(0, null, (fC) => { const fD=fC.s;return fD<fB.length&&(fC.c=fB[fD],fC.s=fD+1,true);}, void 0);}
function dF(fB){ return fB instanceof Array?dD(fB):V(typeof fB, "string")?dE(fB):"GetEnumerator0"in fB?fB.GetEnumerator0():fB.GetEnumerator();}
function dG(){ return P("The input sequence has an insufficient number of elements.");}
function dH(){ return P("The input must be non-negative.");}
function dI(fB, fC){ for(let fD=0, fE=fC.length-1;fD<=fE;fD++)fC[fD]=fB(fD, fC[fD]);return fC;}
function dJ(fB, fC){ for(let fD=0, fE=fC.length-1;fD<=fE;fD++)fC[fD]=fB(fC[fD]);}
function dK(fB, fC){ let fD=true;let fE=0;while(fD&&fE<bS(fC))if(V(fC[fE], fB))fD=false;else fE=fE+1;return!fD;}
class dL extends K { d;GetEnumerator(){ return dC(b4((fB) => fB.K, this.d));} constructor(fB){ super();this.d=fB;} }
class dM { Attr;Children;Delimiters;El;ElKey;Render;Equals(fB){ return this.ElKey===fB.ElKey;} GetHashCode(){ return this.ElKey;} static New(fB, fC, fD, fE, fF, fG){ const fH={Attr:fB, Children:fC, El:fE, ElKey:fF};let fI=(fz(fH, "Delimiters", fD),fz(fH, "Render", fG),fH);return fx(dM, fI);} }
function dN(){ return es();}
function dO(fB){ const fC=null;return bA(() => bB(dQ(() => { }, et(fB)), () => { eu(fB);return bD(null);}));}
function dP(fB, fC){ return dR(eY(fB.$0, fC.$0));}
function dQ(fB, fC){ const fD=fC.Duration;if(fD===0)return bE();else { const fE=(fF) => { function fG(fH){ return(fI) => { const fJ=fI-fH;fC.Compute(fJ);fB();return fJ<=fD?void requestAnimationFrame((fK) => {(fG(fH))(fK);}):fF();};} requestAnimationFrame((fH) => {(fG(fH))(fH);});};return bN((fF, fG, fH) => fE.apply(null, [fF, fG, fH]));} }
function dR(fB){ return{$:0, $0:fB};}
function dS(fB){ return dR(e0(b4(ew, fB)));}
function dT(){ return dR(e1());}
function dU(){ return eA.BatchUpdatesEnabled;}
function dV(fB){ const fC=[0];function fD(){ const fE=null;return bA(() => bB(fB, () => { const fF=fC[0];return V(fF, 1)?(fC[0]=0,bE()):V(fF, 2)?(fC[0]=1,fD()):bE();}));} return() => { const fE=fC[0];if(V(fE, 0)){ fC[0]=1;bF(fD(), null);} else V(fE, 1)?fC[0]=2:void 0;};}
function dW(){ dX(dY()+1);return dY();}
function dX(fB){ e2.counter=fB;}
function dY(){ return e2.counter;}
function dZ(fB, fC){ return{$:2, $0:fB, $1:fC};}
function d0(fB){ return{$:0, $0:fB};}
function d1(fB, fC){ return{$:3, $0:fB, $1:fC};}
function d2(fB){ return cM.A3(fB);}
function d3(fB, fC){ const fD=[];const fE=[];function fF(fI){ while(true){ if(!(fI===null)){ if(fI!=null&&fI.$==1)return fD.push(fI.$0);else if(fI!=null&&fI.$==2){ const fJ=fI.$1;const fK=fI.$0;fF(fK);fI=fJ;} else return fI!=null&&fI.$==3?fI.$0(fB):fI!=null&&fI.$==4?fE.push(fI.$0):null;} else return null;} } fF(fC);const fG=fD.slice(0);let fH=ej(fB, d$(fC), fG, fE.length===0?null:u0038((fI) => { b5((fJ) => { fJ(fI);}, fE);}));return fH;}
function d4(){ return e7.EmptyAttr;}
function d5(fB){ const fC=2;return(fB.DynFlags&fC)===fC;}
function d6(fB){ return ea(fB, (fC, fD) => fC.NGetExitAnim(fD));}
function d7(fB){ const fC=1;return(fB.DynFlags&fC)===fC;}
function d8(fB){ return ea(fB, (fC, fD) => fC.NGetEnterAnim(fD));}
function d9(fB){ const fC=4;return(fB.DynFlags&fC)===fC;}
function d_(fB){ return ea(fB, (fC, fD) => fC.NGetChangeAnim(fD));}
function d$(fB){ return fB!==null&&fB.hasOwnProperty("flags")?fB.flags:0;}
function ea(fB, fC){ return dS(c$((fD) => fC(fD, fB.DynElem), fB.DynNodes));}
function eb(fB, fC){ da((fD) => { fD.NSync(fB);}, fC.DynNodes);}
function ec(fB){ return e6((fC) => fC.NChanged, cR(), cX, fB.DynNodes);}
function ed(fB, fC){ if(fB===null)return fC;else if(fC===null)return fB;else { const fD=cM.A2(fB, fC);ef(fD, d$(fB)|d$(fC));return fD;} }
function ee(fB, fC){ return cM.A1(new fl(fB, fC));}
function ef(fB, fC){ fB.flags=fC;}
class eg extends K { idle;robin;Fork(fB){ this.robin.push(fB);this.idle?(this.idle=false,setTimeout(() => { this.tick();}, 0)):void 0;} tick(){ const fB=Date.now();let fC=true;while(fC)if(this.robin.length===0){ this.idle=true;fC=false;} else {(this.robin.shift())();Date.now()-fB>40?(setTimeout(() => { this.tick();}, 0),fC=false):void 0;} } constructor(){ super();this.idle=true;this.robin=[];} }
class eh extends Error { ct;static New(fB){ return new this("New", fB);} static New_1(fB, fC, fD){ return new this("New_1", fB, fC, fD);} constructor(fB, fC, fD, fE){ let fF;if(fB=="New"){ fF=fC;fB="New_1";fC="The operation was canceled.";fD=null;fE=fF;} if(fB=="New_1"){ const fG=fC;const fH=fD;const fI=fE;super(fG);this.inner=fH;this.ct=fI;} } }
class ei extends K { init;c;pending;r;constructor(){ super();this.c=false;this.pending=null;this.r=[];this.init=1;} }
function ej(fB, fC, fD, fE){ const fF={DynElem:fB, DynFlags:fC, DynNodes:fD};fz(fF, "OnAfterRender", fE);return fF;}
function ek(fB, fC){ return{PreviousNodes:fB, Top:fC};}
function el(){ return en(new bV("New_3"));}
function em(fB){ const fC=[];function fD(fG, fH){ while(true)switch(fG){ case 0:if(fH!=null&&fH.$==0){ const fI=fH.$1;const fJ=fH.$0;fD(0, fJ);fH=fI;} else if(fH!=null&&fH.$==1){ const fK=fH.$0;fH=fK;fG=1;} else if(fH!=null&&fH.$==2){ const fL=fH.$0;fH=fL.Current;} else if(fH!=null&&fH.$==6){ const fM=fH.$0.Holes;return(((fN) =>(fO) => { da(fN, fO);})(fF))(fM);} else return null;break;case 1:fC.push(fH);fH=fH.Children;fG=0;break;} } function fE(fG){ return fD(0, fG);} function fF(fG){ return fD(1, fG);} fE(fB);return en(new bV("New_2", fC));}
function en(fB){ return{$:0, $0:fB};}
function eo(fB, fC){ return en(e_(fB, fC.$0));}
function ep(fB, fC){ return en(e$(fB.$0, fC.$0));}
function eq(fB){ return fa(fB.$0);}
function er(fB, fC){ return en(fb(fB.$0, fC.$0));}
function es(){ return eX.UseAnimations;}
function et(fB){ return ev(df((fC) => fC.$==1?u0038(fC.$0):null, eZ(fB.$0)));}
function eu(fB){ da((fC) => { if(fC.$==0)fC.$0();}, eZ(fB.$0));}
function ev(fB){ const fC=e4(fB);const fD=bS(fC);if(fD===0)return ex();else if(fD===1)return bR(fC, 0);else { const fE=b6(b4((fG) => fG.Duration, fC));const fF=c$((fG) => ez(fE, fG), fC);return ey(fE, (fG) => { da((fH) => { fH.Compute(fG);}, fF);});} }
function ew(fB){ return fB.$0;}
function ex(fB){ return ey(0, () => fB);}
function ey(fB, fC){ return{Compute:fC, Duration:fB};}
function ez(fB, fC){ const fD=fC.Compute;const fE=fC.Duration;const fF=fp(() => fC.Compute(fC.Duration));return{Compute:(fG) => fG>=fE?fF.f():fD(fG), Duration:fB};}
let eA=fw((fB) => class fC { static { eA=fB(this);} static BatchUpdatesEnabled;static { this.BatchUpdatesEnabled=true;} });
function eB(fB){ let fC;const fD=fB.s;if(fD==null||(fD!=null&&fD.$==2?(fC=fD.$1,false):fD!=null&&fD.$==3?(fC=fD.$1,false):true))void 0;else { fB.s=null;for(let fF=0, fG=bS(fC)-1;fF<=fG;fF++){ const fE=bR(fC, fF);if(typeof fE=="object")(((fH) => { eB(fH);})(fE));else fE();} } }
class eC extends K { s;c;n;d;e;Dispose(){ if(this.d)this.d(this);} MoveNext(){ const fB=this.n(this);this.e=fB?1:2;return fB;} get Current(){ return this.e===1?this.c:this.e===0?P("Enumeration has not started. Call MoveNext."):P("Enumeration already finished.");} constructor(fB, fC, fD, fE){ super();this.s=fB;this.c=fC;this.n=fD;this.d=fE;this.e=0;} }
function eD(){ return e7.StringApply;}
function eE(fB, fC, fD){ let fE;fE=null;return[(fF) => { const fG=() => { fD.UpdateMaybe((fH) => { let fI;fE=fB(fF);return fE!=null&&fE.$==1&&(!V(fE.$0, fH)&&(fI=[fE, fE.$0],true))?fI[0]:null;});};fF.addEventListener("change", fG);fF.addEventListener("input", fG);fF.addEventListener("keypress", fG);}, (fF) => { const fG=fC(fF);return(fH) => fH==null?null:fG(fH.$0);}, cT((fF) => { let fG;return fE!=null&&fE.$==1&&(V(fE.$0, fF)&&(fG=fE.$0,true))?null:u0038(fF);}, fD.View)];}
function eF(){ return e7.StringSet;}
function eG(){ return e7.StringGet;}
function eH(){ return e7.StringListSet;}
function eI(){ return e7.StringListGet;}
function eJ(){ return e7.DateTimeSetUnchecked;}
function eK(){ return e7.DateTimeGetUnchecked;}
function eL(fB, fC, fD){ let fE;fE=null;return[(fF) => { fF.addEventListener("change", () => { fD.UpdateMaybe((fG) => { let fH;fE=fB(fF);return fE!=null&&fE.$==1&&(fE.$0!==fG&&(fH=[fE, fE.$0],true))?fH[0]:null;});});}, (fF) => { const fG=fC(fF);return(fH) => fH==null?null:fG(fH.$0);}, cT((fF) => { let fG;return fE!=null&&fE.$==1&&(V(fE.$0, fF)&&(fG=fE.$0,true))?null:u0038(fF);}, fD.View)];}
function eM(){ return e7.FileSetUnchecked;}
function eN(){ return e7.FileGetUnchecked;}
function eO(){ return e7.IntSetUnchecked;}
function eP(){ return e7.IntGetUnchecked;}
function eQ(){ return e7.IntSetChecked;}
function eR(){ return e7.IntGetChecked;}
function eS(){ return e7.FloatSetUnchecked;}
function eT(){ return e7.FloatGetUnchecked;}
function eU(){ return e7.FloatSetChecked;}
function eV(){ return e7.FloatGetChecked;}
let eW=fw((fB) => class fC { static { eW=fB(this);} static defaultWrap;static wrapMap;static rhtml;static rtagName;static rxhtmlTag;static { this.rxhtmlTag=new RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>", "gi");this.rtagName=new RegExp("<([\\w:]+)");this.rhtml=new RegExp("<|&#?\\w+;");const fD=[1, "<table>", "</table>"];let fE=Object.fromEntries([["option", [1, "<select multiple='multiple'>", "</select>"]], ["legend", [1, "<fieldset>", "</fieldset>"]], ["area", [1, "<map>", "</map>"]], ["param", [1, "<object>", "</object>"]], ["thead", fD], ["tbody", fD], ["tfoot", fD], ["tr", [2, "<table><tbody>", "</tbody></table>"]], ["col", [2, "<table><colgroup>", "</colgoup></table>"]], ["td", [3, "<table><tbody><tr>", "</tr></tbody></table>"]]]);this.wrapMap=fE;this.defaultWrap=[0, "", ""];} });
let eX=fw((fB) => class fC { static { eX=fB(this);} static UseAnimations;static CubicInOut;static { this.CubicInOut=e9.Custom((fD) => { const fE=fD*fD;return 3*fE-2*(fE*fD);});this.UseAnimations=true;} });
function eY(fB, fC){ return fB.$==0?fC:fC.$==0?fB:{$:2, $0:fB, $1:fC};}
function eZ(fB){ const fC=[];function fD(fE){ while(true){ if(fE.$==1)return fC.push(fE.$0);else if(fE.$==2){ const fF=fE.$1;const fG=fE.$0;fD(fG);fE=fF;} else return fE.$==3?da((fH) => { fC.push(fH);}, fE.$0):null;} } fD(fB);return fC.slice(0);}
function e0(fB){ const fC=e4(fB);return e5(e1(), eY, fC);}
function e1(){ return fs.Empty;}
let e2=fw((fB) => class fC { static { e2=fB(this);} static counter;static { this.counter=0;} });
class e3 extends L { docNode_1;updates_1;elt;rvUpdates;static New(fB, fC, fD){ const fE=cm(fB, fC, fD.docNode);const fF=fc.Create(fD.updates);return new e3(cc(fE), cX(ec(fE.Attr), fF.v), fB, fF);} constructor(fB, fC, fD, fE){ super(fB, fC);this.docNode_1=fB;this.updates_1=fC;this.elt=fD;this.rvUpdates=fE;} }
function e4(fB){ if(fB instanceof Array)return fB;else if(fB instanceof u0036)return dc(fB);else if(fB===null)return[];else { const fC=[];const fD=dC(fB);try { while(fD.MoveNext())fC.push(fD.Current);return fC;} finally { if(typeof fD=="object"&&a(fD))fD.Dispose();} } }
function e5(fB, fC, fD){ const fE=bS(fD);function fF(fG){ return(fH) => { let fI;switch(fH<=0?0:fH===1?fG>=0&&fG<fE?1:(fI=fH,2):(fI=fH,2)){ case 0:return fB;case 1:return bR(fD, fG);case 2:const fJ=fH/2>>0;return fC((fF(fG))(fJ), (fF(fG+fJ))(fH-fJ));} };} return(fF(0))(fE);}
function e6(fB, fC, fD, fE){ const fF=bS(fE);function fG(fH){ return(fI) => { let fJ;switch(fI<=0?0:fI===1?fH>=0&&fH<fF?1:(fJ=fI,2):(fJ=fI,2)){ case 0:return fC;case 1:return fB(bR(fE, fH));case 2:const fK=fI/2>>0;return fD((fG(fH))(fK), (fG(fH+fK))(fI-fK));} };} return(fG(0))(fF);}
let e7=fw((fB) => class fC { static { e7=fB(this);} static FloatApplyChecked;static FloatGetChecked;static FloatSetChecked;static FloatApplyUnchecked;static FloatGetUnchecked;static FloatSetUnchecked;static IntApplyChecked;static IntGetChecked;static IntSetChecked;static IntApplyUnchecked;static IntGetUnchecked;static IntSetUnchecked;static FileApplyUnchecked;static FileGetUnchecked;static FileSetUnchecked;static DateTimeApplyUnchecked;static DateTimeGetUnchecked;static DateTimeSetUnchecked;static StringListApply;static StringListGet;static StringListSet;static StringApply;static StringGet;static StringSet;static BoolCheckedApply;static EmptyAttr;static { this.EmptyAttr=null;this.BoolCheckedApply=(fT) =>[(fU) => { fU.addEventListener("change", () => fT.Get()!=fU.checked?fT.Set(fU.checked):null);}, (fU) =>(fV) => fV!=null&&fV.$==1?void(fU.checked=fV.$0):null, cT(u0038, fT.View)];this.StringSet=(fT) =>(fU) => { fT.value=fU;};this.StringGet=(fT) => u0038(fT.value);const fD=eG();const fE=eF();this.StringApply=(fT) => eE(fD, fE, fT);this.StringListSet=(fT) =>(fU) => { const fV=fT.options;for(let fW=0, fX=fV.length-1;fW<=fX;fW++)((() => { const fY=fV.item(fW);fY.selected=dK(fY.value, fU);})());};this.StringListGet=(fT) => { const fU=fT.selectedOptions;return u0038(c9(bY(() => b1((fV) =>[fU.item(fV).value], R(0, fU.length-1)))));};const fF=eI();const fG=eH();this.StringListApply=(fT) => eE(fF, fG, fT);this.DateTimeSetUnchecked=(fT) =>(fU) => { fT.value=(new Date(fU)).toLocaleString();};this.DateTimeGetUnchecked=(fT) => { let fU;let fV;const fW=fT.value;if(fd(fW))return u0038(-8640000000000000);else { fU=0;const fX=fn(fW);let fY=fX!=null&&fX.$==1&&(fU=fX.$0,true);fV=[fY, fU];return fV[0]?u0038(fV[1]):null;} };const fH=eK();const fI=eJ();this.DateTimeApplyUnchecked=(fT) => eE(fH, fI, fT);this.FileSetUnchecked=() =>() => null;this.FileGetUnchecked=(fT) => { const fU=fT.files;return u0038(c9(bY(() => b4((fV) => fU.item(fV), R(0, fU.length-1)))));};const fJ=eN();const fK=eM();this.FileApplyUnchecked=(fT) => eL(fJ, fK, fT);this.IntSetUnchecked=(fT) =>(fU) => { fT.value=String(fU);};this.IntGetUnchecked=(fT) => { const fU=fT.value;if(fd(fU))return u0038(0);else { const fV=+fU;return fV!==fV>>0?null:u0038(fV);} };const fL=eP();const fM=eO();this.IntApplyUnchecked=(fT) => eE(fL, fM, fT);this.IntSetChecked=(fT) =>(fU) => { const fV=fU.Input;return fT.value!=fV?void(fT.value=fV):null;};this.IntGetChecked=(fT) => { let fU;let fV;const fW=fT.value;if(fd(fW))fU=(fT.checkValidity?fT.checkValidity():true)?fe.Blank(fW):fe.Invalid(fW);else { const fX=(fV=0,[bP(fW, {get:() => fV, set:(fY) => { fV=fY;}}), fV]);fU=fX[0]?fe.Valid(fX[1], fW):fe.Invalid(fW);} return u0038(fU);};const fN=eR();const fO=eQ();this.IntApplyChecked=(fT) => eE(fN, fO, fT);this.FloatSetUnchecked=(fT) =>(fU) => { fT.value=String(fU);};this.FloatGetUnchecked=(fT) => { const fU=fT.value;if(fd(fU))return u0038(0);else { const fV=+fU;return isNaN(fV)?null:u0038(fV);} };const fP=eT();const fQ=eS();this.FloatApplyUnchecked=(fT) => eE(fP, fQ, fT);this.FloatSetChecked=(fT) =>(fU) => { const fV=fU.Input;return fT.value!=fV?void(fT.value=fV):null;};this.FloatGetChecked=(fT) => { let fU;const fV=fT.value;if(fd(fV))fU=(fT.checkValidity?fT.checkValidity():true)?fe.Blank(fV):fe.Invalid(fV);else { const fW=+fV;fU=isNaN(fW)?fe.Invalid(fV):fe.Valid(fW, fV);} return u0038(fU);};const fR=eV();const fS=eU();this.FloatApplyChecked=(fT) => eE(fR, fS, fT);} });
class e8 extends Error { static New(){ return new this("New");} static New_1(fB){ return new this("New_1", fB);} constructor(fB, fC){ if(fB=="New"){ fB="New_1";fC="The given key was not present in the dictionary.";} if(fB=="New_1"){ const fD=fC;super(fD);} } }
class e9 extends K { transformTime;static Custom(fB){ return new e9(fB);} constructor(fB){ super();this.transformTime=fB;} }
function e_(fB, fC){ return new bV("New_2", c_(fB, fa(fC)));}
function e$(fB, fC){ const fD=new bV("New_2", fa(fC));fD.ExceptWith(fa(fB));return fD;}
function fa(fB){ const fC=dh(fB.Count, void 0);fB.CopyTo(fC, 0);return fC;}
function fb(fB, fC){ const fD=new bV("New_2", fa(fB));fD.IntersectWith(fa(fC));return fD;}
class fc { c;s;v;static Create(fB){ let fC;fC=null;fC=fc.New(fB, null, () => { let fD;fD=fC.s;return fD===null?(fD=cI(fC.c()),fC.s=fD,cB(fD, () => { fC.s=null;}),fD):fD;});return fC;} static New(fB, fC, fD){ return fx(fc, {c:fB, s:fC, v:fD});} }
function fd(fB){ return by(fm, fB);}
class fe { get Input(){ return this.$==1?this.$0:this.$==2?this.$0:this.$1;} static Blank(fB){ return fx(fe, {$:2, $0:fB});} static Invalid(fB){ return fx(fe, {$:1, $0:fB});} static Valid(fB, fC){ return fx(fe, {$:0, $0:fB, $1:fC});} }
function ff(fB){ let fC=[];let fD;for(var fE in fB)fC.push.apply(fC, fB[fE]);return fC;}
function fg(fB, fC){ let fD;if(fC!=null&&fC.$==1){ const fE=[];fD=fC.$0[0].nextSibling;while(fD!==fC.$0[1]){ fE.push(fD);fD=fD.nextSibling;} return fk(fE);} else { let fF=fB.childNodes.length;const fG=fB.childNodes;let fH=di(fF, (fI) => fG[fI]);return fk(fH);} }
function fh(fB, fC){ const fD=fB.$0;return fk(c_((fE) => dj((fF) =>!(fE===fF), fD), fC.$0));}
function fi(fB, fC){ da(fB, fC.$0);}
function fj(fB){ const fC=[];function fD(fE){ while(true){ if(fE!=null&&fE.$==2){ const fF=fE.$0;fE=fF.Current;} else if(fE!=null&&fE.$==1)return fC.push(fE.$0.El);else if(fE==null)return null;else if(fE!=null&&fE.$==5)return fC.push(fE.$0);else if(fE!=null&&fE.$==4)return fC.push(fE.$0.Text);else if(fE!=null&&fE.$==6){ const fG=fE.$0.Els;return(((fJ) =>(fK) => { da(fJ, fK);})((fJ) => { if(fJ==null||fJ.constructor===Object)fD(fJ);else fC.push(fJ);}))(fG);} else { const fH=fE.$1;const fI=fE.$0;fD(fI);fE=fH;} } } fD(fB.Children);return fk(e4(fC));}
function fk(fB){ return{$:0, $0:fB};}
class fl extends K { push;value;dirty;updates;NGetExitAnim(fB){ return dT();} NGetEnterAnim(fB){ return dT();} NGetChangeAnim(fB){ return dT();} NSync(fB){ if(this.dirty){(this.push(fB))(this.value);this.dirty=false;} } get NChanged(){ return this.updates;} constructor(fB, fC){ super();this.push=fC;this.value=void 0;this.dirty=false;this.updates=cT((fD) => { this.value=fD;this.dirty=true;}, fB);} }
function fm(fB){ return fB.match(new RegExp("\\s"))!==null;}
function fn(fB){ const fC=Date.parse(fB);return isNaN(fC)?null:u0038(fC);}
function fo(fB, fC, fD, fE){ const fF=+fB;const fG=fF===fF-fF%1&&fF>=fC&&fF<=fD;if(fG)fE.set(fF);return fG;}
function fp(fB){ return fu(false, fB, fq);}
function fq(){ const fB=this.v();this.c=true;this.v=fB;this.f=fr;return fB;}
function fr(){ return this.v;}
let fs=fw((fB) => class fC { static { fs=fB(this);} static Empty;static { this.Empty={$:0};} });
function ft(fB){ fB.splice(0, bS(fB));}
function fu(fB, fC, fD){ return{c:fB, v:fC, f:fD};}
fA(() => { b();});
fv();

